/*! For license information please see 349eca04.4941cc3b.js.LICENSE.txt */
"use strict";(self.webpackChunkbackstage_microsite=self.webpackChunkbackstage_microsite||[]).push([[819368],{256446:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var o=t(474848),a=t(28453);const r={id:"discovery",title:"Azure Blob Storage Discovery",sidebar_label:"Discovery",description:"Automatically discovering catalog entities from an Azure Blob Storage account"},i=void 0,s={id:"integrations/azure-blobStorage/discovery",title:"Azure Blob Storage Discovery",description:"Automatically discovering catalog entities from an Azure Blob Storage account",source:"@site/../docs/integrations/azure-blobStorage/discovery.md",sourceDirName:"integrations/azure-blobStorage",slug:"/integrations/azure-blobStorage/discovery",permalink:"/docs/next/integrations/azure-blobStorage/discovery",draft:!1,unlisted:!1,editUrl:"https://github.com/backstage/backstage/edit/master/docs/integrations/azure-blobStorage/discovery.md",tags:[],version:"current",frontMatter:{id:"discovery",title:"Azure Blob Storage Discovery",sidebar_label:"Discovery",description:"Automatically discovering catalog entities from an Azure Blob Storage account"},sidebar:"docs",previous:{title:"Locations",permalink:"/docs/next/integrations/azure-blobStorage/locations"},next:{title:"Locations",permalink:"/docs/next/integrations/azure/locations"}},c={},d=[];function l(e){const n={a:"a",admonition:"admonition",code:"code",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["This documentation is written for ",(0,o.jsx)(n.a,{href:"/docs/next/backend-system/",children:"the new backend system"})," which is the default since Backstage ",(0,o.jsx)(n.a,{href:"/docs/next/releases/v1.24.0",children:"version 1.24"}),"."]})}),"\n",(0,o.jsx)(n.p,{children:"The Azure Blob Storage account integration has a special entity provider for discovering catalog\nentities located in a storage account container. If you have a container that contains multiple\ncatalog files, and you want to automatically discover them, you can use this\nprovider. The provider will crawl your Blob Storage account container and register entities\nmatching the configured path. This can be useful as an alternative to static\nlocations or manually adding things to the catalog."}),"\n",(0,o.jsxs)(n.p,{children:["To use the entity provider, you'll need an Azure Blob Storage account integration\n",(0,o.jsx)(n.a,{href:"/docs/next/integrations/azure-blobStorage/locations",children:"set up"})," with ",(0,o.jsx)(n.code,{children:"accountName"})," and either ",(0,o.jsx)(n.code,{children:"aadCredential"}),", ",(0,o.jsx)(n.code,{children:"sasToken"}),", or ",(0,o.jsx)(n.code,{children:"accountKey"})]}),"\n",(0,o.jsx)(n.p,{children:"At production deployments, you likely manage these with the permissions attached\nto your instance."}),"\n",(0,o.jsx)(n.p,{children:"In your configuration, you add a provider config per bucket:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'# app-config.yaml\n\ncatalog:\n  providers:\n    azureBlob:\n      providerId:\n        accountName: ${ACCOUNT_NAME}\n        containerName: ${CONTAINER_NAME}\n        schedule: # same options as in TaskScheduleDefinition\n          # supports cron, ISO duration, "human duration" as used in code\n          frequency: { minutes: 30 }\n          # supports ISO duration, "human duration" as used in code\n          timeout: { minutes: 3 }\n'})}),"\n",(0,o.jsxs)(n.p,{children:["For simple setups, you can omit the provider ID at the config\nwhich has the same effect as using ",(0,o.jsx)(n.code,{children:"default"})," for it."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'# app-config.yaml\n\ncatalog:\n  providers:\n    azureBlob:\n      accountName: ${ACCOUNT_NAME}\n      containerName: ${CONTAINER_NAME}\n      schedule: # same options as in TaskScheduleDefinition\n        # supports cron, ISO duration, "human duration" as used in code\n        frequency: { minutes: 30 }\n        # supports ISO duration, "human duration" as used in code\n        timeout: { minutes: 3 }\n'})}),"\n",(0,o.jsx)(n.p,{children:"As this provider is not one of the default providers, you will first need to install\nthe Azure catalog plugin:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",metastring:'title="From your Backstage root directory"',children:"yarn --cwd packages/backend add @backstage/plugin-catalog-backend-module-azure\n"})}),"\n",(0,o.jsx)(n.p,{children:"Then updated your backend by adding the following line:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:'title="packages/backend/src/index.ts"',children:"backend.add(import('@backstage/plugin-catalog-backend'));\n/* highlight-add-start */\nbackend.add(import('@backstage/plugin-catalog-backend-module-azure'));\n/* highlight-add-end */\n"})})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},221020:(e,n,t)=>{var o=t(296540),a=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(e,n,t){var o,r={},d=null,l=null;for(o in void 0!==t&&(d=""+t),void 0!==n.key&&(d=""+n.key),void 0!==n.ref&&(l=n.ref),n)i.call(n,o)&&!c.hasOwnProperty(o)&&(r[o]=n[o]);if(e&&e.defaultProps)for(o in n=e.defaultProps)void 0===r[o]&&(r[o]=n[o]);return{$$typeof:a,type:e,key:d,ref:l,props:r,_owner:s.current}}n.Fragment=r,n.jsx=d,n.jsxs=d},474848:(e,n,t)=>{e.exports=t(221020)},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>s});var o=t(296540);const a={},r=o.createContext(a);function i(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);